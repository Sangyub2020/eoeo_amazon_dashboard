# 환경 변수 설정 가이드 (초보자용)

## 📝 1단계: .env.local 파일 생성

프로젝트 폴더(`amazon-sales-dashboard`)에 `.env.local` 파일이 이미 생성되어 있습니다.

만약 파일이 없다면:
1. 프로젝트 폴더를 열기
2. 새 파일 만들기 (이름: `.env.local`)
3. 아래 내용을 복사해서 붙여넣기

---

## 🔑 2단계: Supabase 정보 입력하기

### Supabase 프로젝트가 없다면?

1. [Supabase](https://supabase.com)에 가입/로그인
2. "New Project" 클릭
3. 프로젝트 이름 입력 (예: "amazon-sales-dashboard")
4. 데이터베이스 비밀번호 설정
5. 지역 선택 (가까운 곳 선택)
6. 프로젝트 생성 대기 (약 2분)

### Supabase 정보 가져오기

1. Supabase 대시보드 접속
2. 왼쪽 메뉴에서 **Settings** (톱니바퀴 아이콘) 클릭
3. **API** 메뉴 클릭

여기서 다음 정보를 복사하세요:

#### NEXT_PUBLIC_SUPABASE_URL
- **Project URL** 항목의 값을 복사
- 예: `https://abcdefghijklmnop.supabase.co`

#### NEXT_PUBLIC_SUPABASE_ANON_KEY
- **Project API keys** 섹션에서
- **anon public** 키를 복사
- 예: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

#### SUPABASE_SERVICE_ROLE_KEY
- 같은 섹션에서
- **service_role secret** 키를 복사
- ⚠️ **주의**: 이 키는 절대 공개하지 마세요!

---

## 📊 3단계: Google Sheets 정보 입력하기

### Google Service Account 생성하기

1. [Google Cloud Console](https://console.cloud.google.com) 접속
2. 새 프로젝트 생성 (또는 기존 프로젝트 선택)
3. 왼쪽 메뉴 > **APIs & Services** > **Library**
4. "Google Sheets API" 검색 후 **Enable** 클릭
5. 왼쪽 메뉴 > **APIs & Services** > **Credentials**
6. 상단 **+ CREATE CREDENTIALS** > **Service Account** 선택
7. Service Account 이름 입력 (예: "sheets-reader")
8. **CREATE AND CONTINUE** 클릭
9. Role은 선택 안 해도 됨 > **CONTINUE** > **DONE**

### Service Account Key 다운로드

1. 생성된 Service Account 클릭
2. **Keys** 탭 클릭
3. **ADD KEY** > **Create new key** 클릭
4. **JSON** 선택 > **CREATE** 클릭
5. JSON 파일이 다운로드됨

### JSON 파일에서 정보 가져오기

다운로드한 JSON 파일을 열어보면:

```json
{
  "type": "service_account",
  "project_id": "...",
  "private_key_id": "...",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
  "client_email": "sheets-reader@your-project.iam.gserviceaccount.com",
  ...
}
```

#### GOOGLE_SHEETS_CLIENT_EMAIL
- `client_email` 값을 복사
- 예: `sheets-reader@your-project.iam.gserviceaccount.com`

#### GOOGLE_SHEETS_PRIVATE_KEY
- `private_key` 값을 복사 (따옴표 포함)
- 예: `"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"`

### 구글 시트 공유하기

1. 구글 시트 열기
2. 우측 상단 **공유** 버튼 클릭
3. Service Account 이메일 주소 입력 (위에서 복사한 `client_email`)
4. 권한: **뷰어** 선택
5. **왼쪽 알림 보내기** 체크 해제
6. **공유** 클릭

### 구글 시트 ID 가져오기

1. 구글 시트 URL 확인
   - 예: `https://docs.google.com/spreadsheets/d/abc123def456/edit`
2. `abc123def456` 부분이 **시트 ID**입니다

#### GOOGLE_SHEETS_IDS
- **5개 시트의 ID를 쉼표로 구분하여 입력**
- 각 시트의 **모든 탭이 자동으로 읽혀집니다** (약 20개씩)
- 예: `abc123def456,xyz789uvw012,ghi345jkl678,mno901pqr234,stu567vwx890`

#### GOOGLE_SHEETS_EXCLUDE_TABS (선택사항)
- 동기화에서 제외할 탭 이름을 쉼표로 구분
- 예: `Summary,Template,Instructions,참고사항`
- 이 탭들은 데이터 동기화에서 제외됩니다

---

## ✅ 4단계: .env.local 파일 수정하기

1. 프로젝트 폴더에서 `.env.local` 파일 열기
2. `your_...` 부분을 실제 값으로 교체
3. 저장 (Ctrl + S)

### 예시:

```env
NEXT_PUBLIC_SUPABASE_URL=https://abcdefghijklmnop.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTYzODU2Nzg5MCwiZXhwIjoxOTU0MTQzODkwfQ.abc123def456
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjM4NTY3ODkwLCJleHAiOjE5NTQxNDM4OTB9.xyz789uvw012

GOOGLE_SHEETS_CLIENT_EMAIL=sheets-reader@your-project.iam.gserviceaccount.com
GOOGLE_SHEETS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC...\n-----END PRIVATE KEY-----\n"

GOOGLE_SHEETS_IDS=abc123def456,xyz789uvw012,ghi345jkl678,mno901pqr234,stu567vwx890
GOOGLE_SHEETS_EXCLUDE_TABS=Summary,Template,Instructions
```

---

## 🔄 5단계: 개발 서버 재시작

환경 변수를 변경한 후에는 **반드시 개발 서버를 재시작**해야 합니다:

1. 터미널에서 `Ctrl + C`로 서버 중지
2. `npm run dev` 다시 실행

---

## ❓ 문제 해결

### "환경 변수를 찾을 수 없습니다" 오류
- `.env.local` 파일이 프로젝트 루트에 있는지 확인
- 파일 이름이 정확한지 확인 (`.env.local` - 점으로 시작)
- 서버를 재시작했는지 확인

### "Supabase 연결 실패" 오류
- URL과 키가 정확한지 확인
- 따옴표나 공백이 없는지 확인
- Supabase 프로젝트가 활성화되어 있는지 확인

### "Google Sheets 접근 실패" 오류
- Service Account가 시트에 공유되어 있는지 확인
- Private Key에 따옴표가 있는지 확인
- `\n` 문자가 그대로 있는지 확인 (줄바꿈 문자)

---

## 📞 도움이 필요하신가요?

문제가 발생하면 다음을 확인하세요:
1. `.env.local` 파일이 올바른 위치에 있는지
2. 모든 값이 정확하게 입력되었는지
3. 따옴표나 공백이 없는지
4. 개발 서버를 재시작했는지

