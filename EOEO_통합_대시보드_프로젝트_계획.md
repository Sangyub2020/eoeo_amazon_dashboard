# EOEO 통합 대시보드 프로젝트 계획서

## 📋 프로젝트 개요

현재 구글 시트로 관리되고 있는 두 개의 대시보드를 실제 DB 구축 및 웹 대시보드 형태로 통합하여 하나의 시스템으로 관리하는 프로젝트입니다.

### 통합 대상
1. **EOEO All income 대시보드** (들어올 돈)
2. **EOEO all sns payments 대시보드**

### 프로젝트 목표
- ✅ 글로벌마케팅솔루션팀 매출, 온라인 커머스팀 서비스 매출 집계 편의성 향상
- ✅ 구글시트에서 발생하는 각종 휴먼 에러 방지
- ✅ 미수금에 대한 트래킹 시스템 구축
- ✅ 대금집행에 대한 예측 기능 제공
- ✅ 플랫폼별, 브랜드별 대금집행 현황 시각화
- ✅ 기타 업무 정확성과 효율성 향상

### 프로젝트 기간
**목표 완료일**: 이번달 내 최대한 완성

---

## 🚀 프로젝트 시작 가이드

### 1단계: 현재 상태 파악 및 요구사항 수집

#### 필요한 정보 수집
다음 정보를 팀원분들께 질문하여 수집해야 합니다:

**EOEO All income 대시보드 관련:**
- [ ] 구글 시트 URL 또는 ID
- [ ] 시트 구조 (컬럼명, 데이터 형식)
- [ ] 어떤 데이터가 들어있는지 (매출, 수익, 날짜 등)
- [ ] 데이터 업데이트 주기 (매일, 주간, 월간)
- [ ] 누가 데이터를 입력하는지
- [ ] 현재 어떤 문제점이 있는지

**EOEO all sns payments 대시보드 관련:**
- [ ] 구글 시트 URL 또는 ID
- [ ] 시트 구조 (컬럼명, 데이터 형식)
- [ ] 어떤 데이터가 들어있는지 (결제 내역, 플랫폼, 금액 등)
- [ ] 데이터 업데이트 주기
- [ ] 누가 데이터를 입력하는지
- [ ] 현재 어떤 문제점이 있는지

**공통 요구사항:**
- [ ] 미수금 트래킹은 어떤 방식으로 해야 하는지
- [ ] 대금집행 예측은 어떤 기준으로 해야 하는지
- [ ] 플랫폼별, 브랜드별 집계는 어떤 형태로 보여줘야 하는지
- [ ] 권한 관리가 필요한지 (누가 어떤 데이터를 볼 수 있는지)
- [ ] 알림 기능이 필요한지 (예: 미수금 알림, 대금집행 예정 알림)

#### 질문 예시
```
안녕하세요, EOEO 통합 대시보드 프로젝트를 진행하기 위해 몇 가지 질문드립니다:

1. EOEO All income 대시보드
   - 구글 시트 URL을 공유해주실 수 있나요?
   - 시트에 어떤 컬럼들이 있는지 알려주세요
   - 데이터는 언제 업데이트되나요?
   - 현재 가장 불편한 점은 무엇인가요?

2. EOEO all sns payments 대시보드
   - 구글 시트 URL을 공유해주실 수 있나요?
   - 시트에 어떤 컬럼들이 있는지 알려주세요
   - 데이터는 언제 업데이트되나요?
   - 현재 가장 불편한 점은 무엇인가요?

3. 미수금 트래킹
   - 미수금은 어떻게 정의하나요?
   - 미수금 데이터는 어디에 있나요?
   - 어떤 정보를 보여줘야 하나요?

4. 대금집행 예측
   - 대금집행은 어떤 주기로 이루어지나요?
   - 예측에 필요한 데이터는 무엇인가요?
   - 어떤 형태로 보여주면 좋을까요?

5. 플랫폼별, 브랜드별 집계
   - 어떤 플랫폼들이 있나요?
   - 브랜드는 어떻게 구분하나요?
   - 어떤 지표를 보여줘야 하나요?
```

---

### 2단계: 데이터베이스 스키마 설계

#### 필요한 테이블 구조 (예상)

**1. income_master (수익 마스터)**
- 수익 항목의 기본 정보
- 예: 수익 유형, 플랫폼, 브랜드 등

**2. income_transactions (수익 거래 내역)**
- 실제 수익 거래 데이터
- 예: 날짜, 금액, 플랫폼, 브랜드, 상태 등

**3. payment_master (결제 마스터)**
- 결제 항목의 기본 정보
- 예: 결제 유형, 플랫폼, 브랜드 등

**4. payment_transactions (결제 거래 내역)**
- 실제 결제 거래 데이터
- 예: 날짜, 금액, 플랫폼, 브랜드, 상태 등

**5. receivables (미수금)**
- 미수금 추적 데이터
- 예: 거래 ID, 예상 수령일, 실제 수령일, 상태 등

**6. settlement_forecast (대금집행 예측)**
- 대금집행 예측 데이터
- 예: 예상 집행일, 예상 금액, 플랫폼, 브랜드 등

**7. platform_master (플랫폼 마스터)**
- 플랫폼 기본 정보
- 예: 플랫폼명, 정산 주기, 정산 방식 등

**8. brand_master (브랜드 마스터)**
- 브랜드 기본 정보
- 예: 브랜드명, 담당자, 계약 정보 등

> **참고**: 실제 구글 시트 구조를 확인한 후 정확한 스키마를 설계해야 합니다.

---

### 3단계: 구글 시트 연동 개발

#### 기존 프로젝트 활용
현재 프로젝트에는 이미 구글 시트 연동 기능이 있습니다:
- `lib/googleSheets.ts`: 구글 시트 API 클라이언트
- `app/api/sync/route.ts`: 동기화 API 엔드포인트

#### 필요한 작업
1. **새로운 구글 시트 파서 개발**
   - EOEO All income 시트 파서
   - EOEO all sns payments 시트 파서
   - 각 시트의 구조에 맞는 파싱 로직 작성

2. **데이터 변환 로직**
   - 구글 시트 데이터 → DB 스키마 변환
   - 데이터 검증 및 오류 처리

3. **동기화 스케줄링**
   - 자동 동기화 설정 (선택사항)
   - 수동 동기화 버튼 제공

---

### 4단계: 웹 대시보드 개발

#### 필요한 페이지/기능

**1. 통합 대시보드 (메인)**
- 전체 수익/결제 현황 요약
- 플랫폼별, 브랜드별 집계
- 월별/연도별 추이 차트

**2. 수익 관리 페이지**
- EOEO All income 데이터 조회
- 수익 항목별 상세 내역
- 필터링 (날짜, 플랫폼, 브랜드)

**3. 결제 관리 페이지**
- EOEO all sns payments 데이터 조회
- 결제 항목별 상세 내역
- 필터링 (날짜, 플랫폼, 브랜드)

**4. 미수금 트래킹 페이지**
- 미수금 목록 및 상태
- 예상 수령일 vs 실제 수령일 비교
- 미수금 알림 기능

**5. 대금집행 예측 페이지**
- 예상 집행일별 예측 금액
- 플랫폼별, 브랜드별 집행 예측
- 집행 현황 대시보드

**6. 플랫폼별/브랜드별 현황 페이지**
- 플랫폼별 집계 및 차트
- 브랜드별 집계 및 차트
- 비교 분석 기능

**7. 설정 페이지**
- 구글 시트 연동 설정
- 동기화 설정
- 사용자 권한 관리 (필요시)

---

### 5단계: 테스트 및 배포

#### 테스트 체크리스트
- [ ] 구글 시트 데이터 정확히 파싱되는지 확인
- [ ] DB에 데이터가 정확히 저장되는지 확인
- [ ] 대시보드에서 데이터가 정확히 표시되는지 확인
- [ ] 미수금 트래킹 기능이 정상 작동하는지 확인
- [ ] 대금집행 예측 기능이 정상 작동하는지 확인
- [ ] 플랫폼별, 브랜드별 집계가 정확한지 확인
- [ ] 권한 관리가 정상 작동하는지 확인 (필요시)

#### 배포
- Supabase 프로젝트에 마이그레이션 적용
- Next.js 앱 빌드 및 배포
- 환경 변수 설정 확인
- 구글 시트 권한 확인

---

## 📁 프로젝트 구조 (예상)

```
amazon-sales-dashboard/
├── app/
│   ├── dashboard/
│   │   ├── eoeo/
│   │   │   ├── income/          # 수익 관리 페이지
│   │   │   ├── payments/         # 결제 관리 페이지
│   │   │   ├── receivables/      # 미수금 트래킹 페이지
│   │   │   ├── settlement/      # 대금집행 예측 페이지
│   │   │   └── analytics/        # 플랫폼별/브랜드별 현황
│   │   └── ...
│   ├── api/
│   │   ├── eoeo/
│   │   │   ├── sync-income/      # 수익 데이터 동기화
│   │   │   ├── sync-payments/    # 결제 데이터 동기화
│   │   │   └── ...
│   └── ...
├── lib/
│   ├── eoeo/
│   │   ├── incomeParser.ts       # 수익 데이터 파서
│   │   ├── paymentParser.ts      # 결제 데이터 파서
│   │   └── ...
│   └── ...
├── supabase/
│   └── migrations/
│       └── 015_create_eoeo_tables.sql  # EOEO 관련 테이블 생성
└── ...
```

---

## 🔧 기술 스택

현재 프로젝트에서 사용 중인 기술 스택을 그대로 활용:
- **Frontend**: Next.js 16, React 19, TypeScript, Tailwind CSS
- **Backend**: Next.js API Routes
- **Database**: Supabase (PostgreSQL)
- **Charts**: Recharts
- **Icons**: Lucide React
- **Date**: date-fns

---

## 📝 다음 단계

1. **즉시 시작할 수 있는 작업:**
   - [ ] 팀원분들께 질문 목록 전달
   - [ ] 구글 시트 접근 권한 확인
   - [ ] 구글 시트 구조 분석

2. **정보 수집 후 진행할 작업:**
   - [ ] 데이터베이스 스키마 설계
   - [ ] 구글 시트 파서 개발
   - [ ] API 엔드포인트 개발
   - [ ] 대시보드 페이지 개발

---

## 💡 참고사항

### 기존 프로젝트 활용
현재 프로젝트는 이미 다음과 같은 기능을 가지고 있습니다:
- ✅ 구글 시트 연동 (`lib/googleSheets.ts`)
- ✅ Supabase 연동 (`lib/serverSupabaseClient.ts`)
- ✅ 대시보드 UI 컴포넌트 (`components/`)
- ✅ API 라우트 구조 (`app/api/`)

이러한 기존 구조를 최대한 활용하여 개발하면 효율적입니다.

### 질문이 필요할 때
프로젝트 진행 중 궁금한 점이 있으면 언제든지 질문해주세요:
- 구글 시트 구조 파악
- 데이터베이스 스키마 설계
- API 개발
- UI/UX 설계
- 배포 및 운영

---

## 📞 연락처

프로젝트 관련 문의사항이 있으시면 언제든지 연락주세요!

